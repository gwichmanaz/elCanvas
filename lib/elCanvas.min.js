elCanvas=function(){var t,e={fallback:{lineWidth:.001,fillStyle:"#"+Math.floor(16777215*Math.random()).toString(16),strokeStyle:"#ffffff"},rect:{fillStyle:"#"+Math.floor(16777215*Math.random()).toString(16)},svg:{fillStyle:"#"+Math.floor(16777215*Math.random()).toString(16)},text:{fillStyle:"#"+Math.floor(16777215*Math.random()).toString(16),font:"30px museo300",fillStyle:"#ff0000",textAlign:"center"},line:{strokeStyle:"#ff0000",lineWidth:5,lineCap:"round"},quadLine:{strokeStyle:"#ff0000",lineWidth:5,lineCap:"round"},image:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAA+CAMAAABeI7j4AAAAkFBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADDIYgjAAAAL3RSTlMA+/kEUo+SouQeRw3FBvLhpjOfl3EWq3NMJNzCjIRa0bpOQy8rCep+ZmM5LtLMs4FqBYIAAAHLSURBVEjH5dTbcoIwEIDh3YRa1FKqFOr5rLXadt//7bqs6KqDSfS2/zgchG8Ckyg80LrpLQew56QVx2nsiq++X5qIAqqMEvRkTkYJf8zNiEiNEl9qlMTDl/qGP+bCKMmgXR+sYsKD+SiNkhHcKk/5uholDbC1JdCXUdScyBPUZ6EpRI2f6ChqgkZRsw0hKRmU2CAVIQ/2Suc9+wiXj966ZdkMCYOItjBk7iIWWveSxEWsBc2GjFIDfARWHb0tX4hzEJmHQdzhnRwnBX2JcRFYfRMNxCSQvBEZNm6ynJIxYipBZusmybD8WowI5GPcgXUQmLweTLoHEXwpa3veZS4GaToTIVesm0CvMufCSawY5O+QVNwgauab6neowrtgouODdcvZCSFJRhLSdAngJ/YwH9W7pB3vg6kgUuMZZX0URjal8ZC2CL40jja8E+MmtiBkIedRtXbivXuNjfismkFZB3zy0ncT+NQZPKy3Ye5eY1bMiA+Oa2eWB6yxcUN2spkUzZA1JhvNv8b0Ls1Pwv/66vsPBB8hDbCJdbWG3hUZg7fd1bv8tiJPi/EVwYDkRiXBKUFzFpq65FmOxGBwQiZ0VwWTZda4o2wCj/QHW46eA37RLLEAAAAASUVORK5CYII="}},i={fallback:{globalCompositeOperation:"source-over",transformOrigin:"50% 50%",x:0,y:0,skewX:0,skewY:0,xOffset:0,yOffset:0,scaleX:1,scaleY:1,scale:1,opacity:1,rotation:0,zIndex:0,parent:null},circle:{radius:50},line:{x1:0,y1:0,x2:100,y2:100},quadLine:{x1:0,y1:0,qx:0,qy:50,x2:100,y2:100},rect:{width:100,height:100},svg:{__cachedPoints:"",__cachedFunction:function(){},width:100,height:100,points:"93.8,11.7 82.1,0 46.9,35.2 11.7,0 0,11.7 35.2,46.9 0,82.1 11.7,93.8 46.9,58.6 82.1,93.8 93.8,82.1 58.6,46.9"},image:{rounded:!1},text:{width:0,height:0},shape:{customShape:function(){}},textSprite:{transformOrigin:"0% 0%",letterSpacing:0,lineHeight:1,size:1,x:0,y:0,rounded:!1,align:"left",null:!0}};function n(){return t||((t=new Image).src=e.image.src,t.id="backup"),t}var s=["createImageData","setLineDash","createLinearGradient","createPattern","createRadialGradient","getImageData","getLineDash","isPointInPath","isPointInStroke","measureText"];function a(t){var e=this;function i(t){s.indexOf(t)>-1?e[t]=e.ctx[t].bind(e.ctx):e[t]=function(){return e.ctx[t].apply(e.ctx,arguments),e}}for(var n in e.ctx=t,t)"function"==typeof t[n]&&i(n)}function h(){this.data=[1,0,0,1,0,0]}a.prototype={set:function(t,e){return this.ctx[t]=e,this},setAll:function(t){for(var e in t)this.ctx[e]=t[e];return this},fillAndStroke:function(t,e){return this.set("globalAlpha",e),t.fillStyle&&this.fill(),t.strokeStyle&&this.stroke(),this}},h.prototype={translate:function(t,e){this.data[4]+=this.data[0]*t+this.data[2]*e,this.data[5]+=this.data[1]*t+this.data[3]*e},scale:function(t,e){this.data[0]*=t,this.data[1]*=t,this.data[2]*=e,this.data[3]*=e},rotate:function(t){var e=Math.cos(t),i=Math.sin(t),n=this.data[0]*e+this.data[2]*i,s=this.data[1]*e+this.data[3]*i,a=-this.data[0]*i+this.data[2]*e,h=-this.data[1]*i+this.data[3]*e;this.data[0]=n,this.data[1]=s,this.data[2]=a,this.data[3]=h},skew:function(t,e){var i=Math.tan(t*Math.PI/180),n=Math.tan(e*Math.PI/180),s=this.data[0],a=this.data[1];this.data[0]+=n*this.data[2],this.data[1]+=n*this.data[3],this.data[2]+=i*s,this.data[3]+=i*a}};var r={shapes:{circle:function(t,e,i,n){return t.ctx.beginPath().arc(e,i,n,0,2*Math.PI,!1).closePath()},normalRect:function(t,e,i,n,s){return t.ctx.beginPath().moveTo(e,i).lineTo(e+n,i).lineTo(e+n,i+s).lineTo(e,i+s).lineTo(e,i).closePath()},roundRect:function(t,e,i,n,s,a){var h="object"==typeof a?a:{tl:a,tr:a,bl:a,br:a};return t.ctx.beginPath().moveTo(e+h.tl,i).lineTo(e+n-h.tr,i).quadraticCurveTo(e+n,i,e+n,i+h.tr).lineTo(e+n,i+s-h.br).quadraticCurveTo(e+n,i+s,e+n-h.br,i+s).lineTo(e+h.bl,i+s).quadraticCurveTo(e,i+s,e,i+s-h.bl).lineTo(e,i+h.tl).quadraticCurveTo(e,i,e+h.tl,i).closePath()}},missingLetterProps:function(t){var e;return{type:"rect",width:(e=(e=t[" "]?t[" "].frame:t[Object.keys(t)[0]])||{w:1,h:1}).w,height:e.h,style:{lineWidth:2,strokeStyle:"#000000",fillStyle:!1}}},adjustAlignment:function(t,e,i){function n(n,s){var a=e-(t[s].x+t[s].width);"center"==i&&(a/=2);for(var h=n;h<=s;h++)t[h].x+=a}if("left"!=i){for(var s=0,a=1;a<t.length;)t[a].y>t[s].y&&(n(s,a-1),s=a),a++;n(s,a-1)}},mergeDefaultProperties:function(t,n){return(t=t||{}).style=t.style||{},t.type=n,r.setIfUndefined(t,i[n]),r.setIfUndefined(t,i.fallback),r.setIfUndefined(t.style,e[n]||e.fallback),t},setIfUndefined:function(t,e){var i=Object.assign({},e,t);Object.assign(t,i)},setObjectScale:function(t){1!=t.scale&&(t.scaleX=t.scale,t.scaleY=t.scale)},shuffleArray:function(t){for(var e=t.length-1;e>0;e--){var i=Math.floor(Math.random()*(e+1)),n=t[e];t[e]=t[i],t[i]=n}},hasParent:function(t){return t.parent&&"dummyParent"!=t.parent.id},addParents:function(t){t.forEach((function(t){r.hasParent(t)&&(t.zIndex+=t.parent.zIndex,t.parent.childNodes||(t.parent.childNodes=[]),t.parent.childNodes.push(t))}))},loadImageFromUrl:function(t,e,i){t[e]=new Promise((function(n,s){var a=new Image;a.src=i,a.id=e,a.addEventListener("load",(function(){t[e]=a,n(a)}),!1)}))},generateRadialGradientBitmap:function(t,e,i,n){var s=document.createElement("canvas"),a=e<<1;s.width=s.height=a;var h=s.getContext("2d"),r=h.createRadialGradient(e,e,e>>1,e,e,e);r.addColorStop(0,i),r.addColorStop(1,n),h.fillStyle=r,h.fillRect(0,0,a,a);var o=new Image;return o.src=s.toDataURL("image/png"),o},fullyInside:function(t,e){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y},debounce:function(t){var e;return function(){var i=this,n=arguments;e&&window.cancelAnimationFrame(e),e=window.requestAnimationFrame((function(){t.apply(i,n)}))}},parseSvgPathData:function(t,e){var i,n=t.points,s={x:[],y:[]},a=[],h={init:function(){this.x=this.x0=this.x1=this.x2=this.y=this.y0=this.y1=this.y2=0,a.push([e.beginPath,[]])},A:function(t,i,n,h,r,o,c){var l,d,u,f=o-this.x,A=c-this.y,p=n/180*Math.PI,y=p?Math.cos(p):1,g=p?Math.sin(p):0,x=i/t,m=r?1:-1,v=m*(-f*y-A*g),w=m*(-f*g+A*y),b=Math.hypot(v,w/x),S=2*t>b?t:b/2,k=2*m*Math.asin(b/2/S);h&&(k=k>0?2*Math.PI-k:-2*Math.PI-k),l=Math.atan2(x*v,w)-k/2,d=Math.cos(l),u=Math.sin(l),a.push([e.ellipse,[this.x-S*(y*d-g*x*u),this.y-S*(g*d+y*x*u),S,S*x,p,l,l+k,-1===m]]),this.x=o,this.y=c,s.x.push(o),s.y.push(c)},M:function(t,i){s.x.push(t),s.y.push(i),a.push([e.moveTo,[this.x=this.x0=t,this.y=this.y0=i]])},L:function(t,i){s.x.push(t),s.y.push(i),a.push([e.lineTo,[this.x=t,this.y=i]])},H:function(t){s.x.push(t),a.push([e.lineTo,[this.x=t,this.y]])},V:function(t){s.y.push(t),a.push([e.lineTo,[this.x,this.y=t]])},C:function(t,i,n,h,r,o){s.x.push(r),s.y.push(o),a.push([e.bezierCurveTo,[this.x1=t,this.y1=i,this.x2=n,this.y2=h,this.x=r,this.y=o]])},S:function(t,i,n,h){s.x.push(n),s.y.push(h),a.push([e.bezierCurveTo,[this.x1=2*this.x-this.x2,this.y1=2*this.y-this.y2,this.x2=t,this.y2=i,this.x=n,this.y=h]])},Q:function(t,i,n,h){s.x.push(n),s.y.push(h),a.push([e.quadraticCurveTo,[this.x1=t,this.y1=i,this.x=n,this.y=h]])},T:function(t,i){s.x.push(t),s.y.push(i),a.quadraticCurveTo([e.quadraticCurveTo,[this.x1+=2*(this.x-this.x1),this.y1+=2*(this.y-this.y1),this.x=t,this.y=i]])},Z:function(){a.push([e.closePath,[]])},a:function(t,e,i,n,s,a,h){this.A(t,e,i,n,s,this.x+a,this.y+h)},m:function(t,e){this.M(this.x+t,this.y+e)},l:function(t,e){this.L(this.x+t,this.y+e)},h:function(t){this.H(this.x+t)},v:function(t){this.V(this.y+t)},c:function(t,e,i,n,s,a){this.C(this.x+t,this.y+e,this.x+i,this.y+n,this.x+s,this.y+a)},s:function(t,e,i,n){this.S(this.x+t,this.y+e,this.x+i,this.y+n)},q:function(t,e,i,n){this.Q(this.x+t,this.y+e,this.x+i,this.y+n)},t:function(t,e){this.T(this.x+t,this.y+e)},z:function(){this.Z()},x0:0,y0:0,x:0,y:0,x1:0,y1:0,x2:0,y2:0},r=/([achlmqstvz])([^achlmqstvz]*)/gi,o={A:{n:7,f:"A"},C:{n:6,f:"C"},H:{n:1,f:"H"},L:{n:2,f:"L"},M:{n:2,f:"L"},Q:{n:4,f:"Q"},S:{n:4,f:"S"},T:{n:2,f:"T"},V:{n:1,f:"V"},Z:{n:0},a:{n:7,f:"a"},c:{n:6,f:"c"},h:{n:1,f:"h"},l:{n:2,f:"l"},m:{n:2,f:"l"},q:{n:4,f:"q"},s:{n:4,f:"s"},t:{n:2,f:"t"},v:{n:1,f:"v"},z:{n:0}},c=function(t,e,i){if(e in o)if(i.length===o[e].n){var n=t;n[e].apply(n,i)}else if(i.length>o[e].n){var s=t;s[e].apply(s,i),i.splice(0,o[e].n),c(t,o[e].f,i)}};for(h.init();i=r.exec(n);)c(h,i[1],i[2].replace(/^\s+|\s+$/g,"").replace(/(\d)\-/g,"$1 -").split(/[, \t\n\r]+/g).map(Number));var l=Math.min.apply(null,s.x),d=Math.max.apply(null,s.x),u=Math.min.apply(null,s.y),f=Math.max.apply(null,s.y);t.width=2*(l+(d-l)/2),t.height=2*(u+(f-u)/2);return function(){a.forEach((function(t){t[0].apply(e,t[1])}))}},hitTest:function(t,e,i){for(var n=t.objects.length-1;n>=0;n--)if((t.objects[n].interactable||t.objects[n].debug)&&r.fullyInside(e,t.objects[n]))return i&&i(t.objects[n]),t.objects[n];return null}};function o(t,e){"use strict";this.ctx=new a(t.getContext("2d")),this.ctx.canvas=t,(e=e||{}).images=e.images||{},this.width=e.width||t.offsetWidth,this.height=e.height||t.offsetHeight,this.center={x:this.width/2,y:this.height/2},this.images=e.images,this.AlignToCenter=e.AlignToCenter||!1,this.container=t;var i={},n=e.spriteMaps||e.spriteFonts;n&&n.forEach((function(t){i[t.meta.image]=t.frames})),this.spriteMaps=i,this.objects=[],this.firstFrame=!0,this.customShapes={},this._util=r,this.update=this.__update.bind(this)}return o.prototype={translateScaleRotate(t,e){r.hasParent(t)&&this.translateScaleRotate(t.parent),"circle"==t.type&&(t.width=t.height=t.radius/2),t.width=t.width||0,t.height=t.height||0;var i=t.transformOrigin.replace(/%/g,"").split(" ");t.centerX=t.width*(Number(i[0])/100),t.centerY=t.height*(Number(i[1])/100);var n=new h;return this.AlignToCenter&&!r.hasParent(t)&&n.translate(this.center.x,this.center.y),n.translate(t.x,t.y),n.translate(t.centerX,t.centerY),n.skew(t.skewX,t.skewY),n.rotate(t.rotation*Math.PI/180),n.scale(t.scaleX,t.scaleY),n.translate(-t.centerX,-t.centerY),this.ctx.transform(n.data[0],n.data[1],n.data[2],n.data[3],n.data[4],n.data[5])},importImages:function(t){for(k in t)r.loadImageFromUrl(this.images,k,t[k])},prepareShape:function(t){return r.setObjectScale(t),this.prepFuncs[t.type]&&this.prepFuncs[t.type].bind(this)(t),this.ctx.set("globalCompositeOperation",t.globalCompositeOperation),this.translateScaleRotate(t),this},fillAndStroke:function(t){return t.null||this.ctx.fillAndStroke(t.style,t.opacity),this},styleShape:function(t){this.ctx.setAll(t)},maskShape:function(t){t.inverseMask?(t.globalCompositeOperation="destination-out",t.mask.globalCompositeOperation="source-over"):(this.draw(t.mask),this.ctx.clip()),this.draw(t.mask)},draw:function(t){this.ctx.save(),t.mask&&this.maskShape(t),this.prepareShape(t),this.styleShape(t.style),this.renderFuncs[t.type](this,t),this.ctx.restore()},debugObject:function(t){t.debug&&(r.shapes.circle(this,t.centerX,t.centerY,10),el.ctx.set("globalCompositeOperation","difference"),this.ctx.fill())},initFuncs:{text:function(t){"safari"==t.style.textBaseline&&delete t.style.textBaseline},svg:function(t){t.__cachedFunction=r.parseSvgPathData(t,el.ctx),t.style.setLineDash&&el.ctx.setLineDash(t.style.setLineDash.split(",").map(Number)),t.style.lineDashOffset&&el.ctx.set("lineDashOffset",t.style.lineDashOffset),t.__cachedFunction()},image:function(t){t.id=t.id||t.url,this.images[t.id]||(t.url?r.loadImageFromUrl(this.images,t.id,t.url):t.radialGradient&&(this.images[t.id]=r.generateRadialGradientBitmap(t.id,t.radialGradient.size,t.radialGradient.inner,t.radialGradient.outer)))},textSprite:function(t){t.width=t.width||this.container.width,t.height=t.height||this.container.height,t.type="rect",t.map=t.map||t.font,t.width/=t.scale,t.height/=t.scale;var e=t.map&&this.spriteMaps[t.map];if(e){var i=0,n=0,s=t.width,a=t.missing||r.missingLetterProps(e),h=this,o=t.text.split("").map((function(r){if("\n"==r)return c(),null;var o,l=e[r]&&e[r].frame;if(l)o={type:"image",id:t.map,width:l.w,height:l.h,sprite:{width:l.w,height:l.h,x:l.x,y:l.y}};else{if(t.skipMissing)return null;o=Object.assign({},a)}return i+o.width>s&&c(),o.x=i,o.y=n,o.zIndex=1,o.parent=t,i+=o.width+t.letterSpacing,h.addObject(o)})).filter((function(t){return!!t}));r.adjustAlignment(o,s,t.align),t.letters=o}function c(){i=0,n+=a.height*t.lineHeight}}},prepFuncs:{line:function(t){t.x=t.x1,t.y=t.y1},quadLine:function(t){t.x=t.x1,t.y=t.y1},image:function(t){var e=this.images[t.id]||n();e instanceof Image?(t.width=t.width||e.width,t.height=t.height||e.height,t.sprite&&(t.width=t.sprite.width,t.height=t.sprite.height)):console.log("This image is not ready or not an image",e)}},renderFuncs:{rect:function(t,e){e.radius?r.shapes.roundRect(t,0,0,e.width,e.height,e.radius):r.shapes.normalRect(t,0,0,e.width,e.height),t.fillAndStroke(e)},circle:function(t,e){r.shapes.circle(t,0,0,e.radius),t.fillAndStroke(e)},line:function(t,e){t.ctx.beginPath().moveTo(0,0).lineTo(e.x2-e.x1,e.y2-e.y1),t.fillAndStroke(e)},quadLine:function(t,e){t.ctx.beginPath().moveTo(0,0).quadraticCurveTo(e.qx,e.qy,e.x2-e.x1,e.y2-e.y1),t.fillAndStroke(e)},image:function(t,e,i){var s=t.images[e.id]||n();s instanceof Image&&(!i&&t.ctx.fillAndStroke("empty",e.opacity),e.sprite?t.ctx.drawImage(s,e.sprite.x,e.sprite.y,e.sprite.width,e.sprite.height,0,0,e.width,e.height):(e.rounded&&(r.shapes.roundRect(t,0,0,e.width,e.height,e.rounded),t.ctx.clip()),t.ctx.drawImage(s,0,0,e.width,e.height)),t.ctx.fillAndStroke(e.style,"empty"))},text:function(t,e){t.ctx.fillAndStroke("empty",e.opacity);var i=void 0;if(e.maxWidth){i=e.maxWidth;var n=t.ctx.measureText(e.text).width;if(e.maxWidth<n){var s=e.maxWidth/n;t.ctx.scale(1,s)}}e.style.strokeStyle&&t.ctx.strokeText(e.text,0,0,i),t.ctx.fillText(e.text,0,0,i)},shape:function(t,e){var i="function"==typeof e.customShape?e.customShape:t.customShapes[e.customShape];"function"==typeof i?(i(t),t.fillAndStroke(e)):console.log("custom shape function missing",e.customShape,t.customShapes)},svg:function(t,e){e.__cachedPoints!==e.points&&(e.__cachedFunction=r.parseSvgPathData(e,t.ctx),e.__cachedPoints=e.points),e.style.setLineDash&&t.ctx.setLineDash(e.style.setLineDash.split(",").map(Number)),e.style.lineDashOffset&&t.ctx.set("lineDashOffset",e.style.lineDashOffset),e.__cachedFunction(),t.fillAndStroke(e)}},addObject:function(t,e){return e=e||t&&t.type,t=r.mergeDefaultProperties(t,e),this.initFuncs[t.type]&&this.initFuncs[t.type].bind(this)(t),this.objects.push(t),t},__update:function(){this.firstFrame&&(r.addParents(this.objects),this.sortByZIndex()),this.ctx.clearRect(0,0,9999,9999);for(var t=this.objects.length,e=0;e<t;e++)this.draw(this.objects[e]);this.firstFrame=!1},sortByZIndex:function(){this.objects.sort((function(t,e){return t.zIndex-e.zIndex}))},remove:function(t){if(Array.isArray(t))t.forEach(this.remove.bind(this));else{var e=t;e.childNodes&&(this.remove(e.childNodes),e.childNodes=null);var i=this.objects.indexOf(e);i>-1&&this.objects.splice(i,1)}},addEventListener:function(t,e){var i=this.container,n=this;i.addEventListener(t,(function(t){var s=i.currentStyle||window.getComputedStyle(i,null),a=parseInt(s.borderLeftWidth,10),h=parseInt(s.borderTopWidth,10),r=i.getBoundingClientRect(),o=r.width/n.width,c=r.height/n.height,l=(t.clientX-a-r.left)/o,d=(t.clientY-h-r.top)/c;t.canvasX=l,t.canvasY=d,e(t)}))},addResizeListener:function(t){var e=this,i=r.debounce(t);window.addEventListener("resize",(function(){e.container.width=e.container.parentNode.offsetWidth,e.container.height=e.container.parentNode.offsetHeight,e.width=e.container.width,e.height=e.container.height,i("debounced")}),!1)},ready:function(){return Promise.all(Object.values(this.images).filter((function(t){return t instanceof Promise})))}},["rect","circle","line","quadLine","image","shape","text","svg","textSprite"].forEach((function(t){o.prototype[t]=function(e){return this.addObject(e,t)}})),Object.defineProperty(o.prototype,"objectsCount",{get:function(){return this.objects.length}}),o}();